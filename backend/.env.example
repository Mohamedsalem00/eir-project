# Configuration des notifications EIR pour différents environnements
# Copiez ce fichier vers .env dans le répertoire backend/

# ====================================
# CONFIGURATION BASE DE DONNÉES
# ====================================
DATABASE_URL=postgresql://user:password@localhost:5432/eir_project

# ====================================
# CONFIGURATION EMAIL (SMTP)
# ====================================

# Gmail (recommandé pour le développement)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
EMAIL_USE_TLS=true
EMAIL_USER=medsalemlmt@gmail.com
# Pour Gmail, utilisez un mot de passe d'application : https://support.google.com/accounts/answer/185833
EMAIL_PASSWORD=yvjl ulaa kzen ndex

# Alternative: Outlook/Hotmail
# SMTP_SERVER=smtp-mail.outlook.com
# SMTP_PORT=587
# EMAIL_USE_TLS=true
# EMAIL_USER=votre-email@outlook.com
# EMAIL_PASSWORD=votre-mot-de-passe

# Alternative: SendGrid (production recommandée)
# SMTP_SERVER=smtp.sendgrid.net
# SMTP_PORT=587
# EMAIL_USE_TLS=true
# EMAIL_USER=apikey
# EMAIL_PASSWORD=votre-api-key-sendgrid

# Alternative: SMTP local (développement uniquement)
# SMTP_SERVER=localhost
# SMTP_PORT=1025
# EMAIL_USE_TLS=false
# EMAIL_USER=
# EMAIL_PASSWORD=

# ====================================
# CONFIGURATION SMS
# ====================================

# Provider SMS (console|twilio|aws_sns)
SMS_PROVIDER=console

# Twilio (si SMS_PROVIDER=twilio)
TWILIO_ACCOUNT_SID=votre-account-sid
TWILIO_AUTH_TOKEN=votre-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# AWS SNS (si SMS_PROVIDER=aws_sns)
AWS_ACCESS_KEY_ID=votre-access-key
AWS_SECRET_ACCESS_KEY=votre-secret-key
AWS_REGION=eu-west-1

# ====================================
# CONFIGURATION NOTIFICATIONS
# ====================================

# Mode de fonctionnement (development|production)
NOTIFICATIONS_MODE=development

# Activer/désactiver les notifications
NOTIFICATIONS_ENABLED=true

# Activer le planificateur automatique
SCHEDULER_ENABLED=true

# Intervalle de traitement en minutes
SCHEDULER_INTERVAL_MINUTES=5

# Nombre maximum de tentatives
MAX_RETRY_ATTEMPTS=3

# Délai entre tentatives (en minutes)
RETRY_DELAY_MINUTES=10

# Limite de notifications par batch
BATCH_SIZE=50

# ====================================
# CONFIGURATION RATE LIMITING
# ====================================

# Limite d'emails par minute
EMAIL_RATE_LIMIT_PER_MINUTE=30

# Limite de SMS par minute  
SMS_RATE_LIMIT_PER_MINUTE=10

# Limite par utilisateur (par heure)
USER_RATE_LIMIT_PER_HOUR=20

# ====================================
# CONFIGURATION SÉCURITÉ
# ====================================

# JWT Secret pour l'authentification API
JWT_SECRET_KEY=votre-secret-jwt-super-securise

# Clé de chiffrement pour les données sensibles
ENCRYPTION_KEY=votre-cle-de-chiffrement-32-caracteres

# Activer l'authentification sur les endpoints admin
REQUIRE_AUTH_FOR_ADMIN=true

# ====================================
# CONFIGURATION LOGS
# ====================================

# Niveau de log (DEBUG|INFO|WARNING|ERROR)
LOG_LEVEL=INFO

# Chemin vers le fichier de log
LOG_FILE_PATH=logs/notifications.log

# Activer la rotation des logs
LOG_ROTATION_ENABLED=true

# Taille maximum par fichier de log (en MB)
LOG_MAX_FILE_SIZE=10

# Nombre de fichiers de log à conserver
LOG_BACKUP_COUNT=5

# ====================================
# CONFIGURATION DÉVELOPPEMENT
# ====================================

# Mode test pour les emails (les emails ne sont pas vraiment envoyés)
EMAIL_TEST_MODE=true

# Mode test pour les SMS (les SMS ne sont pas vraiment envoyés)
SMS_TEST_MODE=true

# Adresse email pour recevoir tous les tests
TEST_EMAIL_RECIPIENT=test@example.com

# Numéro de téléphone pour recevoir tous les tests SMS
TEST_SMS_RECIPIENT=+33123456789

# Afficher plus de détails dans les logs de développement
DEBUG_MODE=true

# ====================================
# CONFIGURATION PRODUCTION
# ====================================

# Pour la production, modifiez ces valeurs :

# NOTIFICATIONS_MODE=production
# EMAIL_TEST_MODE=false
# SMS_TEST_MODE=false
# DEBUG_MODE=false
# LOG_LEVEL=WARNING
# REQUIRE_AUTH_FOR_ADMIN=true

# Utilisez des services externes pour la production :
# - SendGrid ou AWS SES pour les emails
# - Twilio ou AWS SNS pour les SMS
# - Base de données externe (pas localhost)
# - Stockage des logs externalisé

# ====================================
# EXEMPLES DE CONFIGURATION
# ====================================

# Configuration Gmail (développement)
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# EMAIL_USE_TLS=true
# EMAIL_USER=dev@votre-domaine.com
# EMAIL_PASSWORD=xxxx-xxxx-xxxx-xxxx  # Mot de passe d'application

# Configuration production avec SendGrid
# SMTP_SERVER=smtp.sendgrid.net
# SMTP_PORT=587
# EMAIL_USE_TLS=true
# EMAIL_USER=apikey
# EMAIL_PASSWORD=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Configuration production avec Twilio
# SMS_PROVIDER=twilio
# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_PHONE_NUMBER=+33123456789

# ====================================
# NOTES IMPORTANTES
# ====================================

# 1. Ne committez JAMAIS ce fichier avec de vraies credentials
# 2. Utilisez des mots de passe d'application pour Gmail
# 3. En production, stockez les secrets dans un gestionnaire sécurisé
# 4. Testez la configuration avec le script test-eir-notifications.sh
# 5. Surveillez les logs pour détecter les problèmes

# ====================================
# COMMANDES UTILES
# ====================================

# Tester la configuration :
# ./scripts/test-eir-notifications.sh

# Démarrer en mode développement :
# cd backend && uvicorn app.main:app --reload --env-file .env

# Vérifier les logs :
# tail -f backend/logs/notifications.log

# Tester uniquement l'email :
# curl -X POST http://localhost:8000/api/notifications/test-email

# Tester uniquement les SMS :
# curl -X POST http://localhost:8000/api/notifications/test-sms
